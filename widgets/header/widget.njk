<!-- Announcement Bar -->
{# <div class="bg-gradient-to-r from-gray-900 to-black text-white overflow-hidden announcement-bar">
    <div class="marquee-container flex flex-row items-center gap-0 py-3">
        {% for item in header.data.announcement %}
        <div class="animate-marquee">
            {% set printed = 0 %}
            {% for item in announcement %}
            {% if item.description and item.description | trim != '' %}
            {% if printed > 0 %}<span class="px-3 text-blue-400">โข</span>{% endif %}
            <span class="text-sm lg:text-base font-bold px-4 font-['Cairo',sans-serif]">{{ item.description }}</span>
            {% set printed = printed + 1 %}
            {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div> #}
<div class="bg-black text-white overflow-hidden announcement-bar py-3" x-data="{ scrolled: false }" @scroll.window="scrolled = window.pageYOffset > 40" :class="scrolled ? 'hidden' : ''">
    <div class="marquee-container">
      <div class="animate-marquee">
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">โจ ุนุฑูุถ ูุณุชูุฑุฉ ููุฏุงูุง ููุงุฌุฆุฉ ูู ููู</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ ุงุทูุจ ุฏูููุชู ูุฎููู ุฃูู ุงููุณุชููุฏูู</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ณ ููุฑ ููุชูโฆ ุงูุดุฑุงุก ุฏูููุชู ูุงูุฏูุน ูุงุญููุง</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ ููุชุฌุงุช ุฌุฏูุฏุฉ ุจุชูุฒู ุจุดูู ุญุตุฑู ุนูุฏูุง</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ ุชุณูู ุจุณูููุฉ ูุฎููููุง ุชุฌุฑุจุฉ ูุฎุชููุฉ</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">โญ ุงูุฌูุฏุฉ ุงููู ุจุชุฏูุฑ ุนูููุง ูู ููุงู ูุงุญุฏ</span>
      </div>
      <div class="animate-marquee" aria-hidden="true">
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">โจ ุนุฑูุถ ูุณุชูุฑุฉ ููุฏุงูุง ููุงุฌุฆุฉ ูู ููู</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ ุงุทูุจ ุฏูููุชู ูุฎููู ุฃูู ุงููุณุชููุฏูู</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ณ ููุฑ ููุชูโฆ ุงูุดุฑุงุก ุฏูููุชู ูุงูุฏูุน ูุงุญููุง</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ ููุชุฌุงุช ุฌุฏูุฏุฉ ุจุชูุฒู ุจุดูู ุญุตุฑู ุนูุฏูุง</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">๐ ุชุณูู ุจุณูููุฉ ูุฎููููุง ุชุฌุฑุจุฉ ูุฎุชููุฉ</span><span class="mx-2 text-blue-400">โข</span>
        <span class="mx-5 text-sm lg:text-base font-bold font-['Cairo',sans-serif] tracking-wide">โญ ุงูุฌูุฏุฉ ุงููู ุจุชุฏูุฑ ุนูููุง ูู ููุงู ูุงุญุฏ</span>
      </div>
    </div>
  </div>
  

<!-- Header & Interactive Modals Controller -->
<header
    class="sticky top-0 left-0 w-full z-40 bg-white/95 backdrop-blur-md shadow-lg border-b border-gray-200 transition-all duration-300">
    <div class="container mx-auto">
        <div class="grid grid-cols-[auto_1fr_auto] items-center py-4">
            <!-- Left column: mobile burger, desktop icons -->
            <div class="flex items-center justify-start">
                <!-- Mobile: Category (hamburger) icon only -->
                <button @click="toggleModal('sidebar')" aria-label="ุงููุงุฆูุฉ" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 lg:hidden">
                    <svg class="h-6 w-6 text-gray-700" viewBox="0 0 22 22"
                        stroke="currentColor" stroke-width="1.9">
                        <path d="M1 5h20M1 11h20M1 17h20" stroke-linecap="round"></path>
                    </svg>
                </button>
                <!-- Desktop: logo on the left -->
                <a href="#" class="hidden lg:flex hover:opacity-80 transition-opacity duration-200">
                    <img src="{{globals.app.logo.fileUrl}}" alt="Matjrna Logo"
                        class="h-12 md:h-16 w-auto">
                </a>
            </div>
            <!-- Center column: mobile logo, desktop menu in center -->
            <div class="flex justify-center min-w-0">
                <!-- Mobile logo -->
                <a href="#" class="hover:opacity-80 transition-opacity duration-200 lg:hidden">
                    <img src="{{globals.app.logo.fileUrl}}" alt="Matjrna Logo"
                        class="h-12 md:h-16 w-auto">
                </a>
                <!-- Desktop: center menu items from header_menu -->
                <div class="relative hidden lg:flex items-center justify-center w-full min-w-0"
                     x-data="{
                        open:false,
                        init(){ this.$nextTick(() => { this.recalc(); window.addEventListener('resize', () => this.recalc()); }); },
                        recalc(){
                            const container = this.$refs.container; if(!container) return;
                            const list = this.$refs.list; const more = this.$refs.more; const moreList = this.$refs.moreList; const moreWrap = this.$refs.moreWrap;
                            const links = Array.from(list?.querySelectorAll('[data-index]') || []);
                            const dropdownLinks = Array.from(moreList?.querySelectorAll('[data-index]') || []);
                            let available = container.clientWidth - ((more?.offsetWidth || 32) + 8);
                            let used = 0; let hidden = 0;
                            links.forEach((el, i) => {
                                const cs = getComputedStyle(el);
                                const w = el.offsetWidth + parseFloat(cs.marginLeft) + parseFloat(cs.marginRight);
                                if (used + w <= available) { el.style.display = 'inline-flex'; if (dropdownLinks[i]) dropdownLinks[i].style.display = 'none'; used += w; }
                                else { el.style.display = 'none'; if (dropdownLinks[i]) dropdownLinks[i].style.display = 'block'; hidden++; }
                            });
                            if (moreWrap) moreWrap.classList.toggle('hidden', hidden === 0);
                        }
                     }" x-on:click.outside="open=false">
                    <div class="overflow-hidden w-full min-w-0" x-ref="container">
                        <div class="flex items-center justify-center gap-x-4 xl:gap-x-6 flex-nowrap" x-ref="list">
                            {% if header.data.header_menu and (header.data.header_menu | length) > 0 %}
                                {% for item in header.data.header_menu %}
                                <a data-index="{{ loop.index0 }}" href="{{ item.url | default('#') }}" class="text-gray-700 hover:text-black font-semibold whitespace-nowrap">{{ item.title | default('ุตูุญุฉ') }}</a>
                                {% endfor %}
                            {% else %}
                                <a data-index="0" href="/" class="text-gray-700 hover:text-black font-semibold whitespace-nowrap">ุงูุฑุฆูุณูุฉ</a>
                                <a data-index="1" href="/collections" class="text-gray-700 hover:text-black font-semibold whitespace-nowrap">ุงูุชุตูููุงุช</a>
                                <a data-index="2" href="/products-collection" class="text-gray-700 hover:text-black font-semibold whitespace-nowrap">ุงูููุชุฌุงุช</a>
                                <a data-index="3" href="/latest" class="text-gray-700 hover:text-black font-semibold whitespace-nowrap">ุงูุฃุญุฏุซ</a>
                                <a data-index="4" href="/blog" class="text-gray-700 hover:text-black font-semibold whitespace-nowrap">ุงููุฏููุฉ</a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="ml-2 relative" x-ref="moreWrap">
                        <button @click="open=!open" x-ref="more" aria-label="ุงููุฒูุฏ" class="w-8 h-8 inline-flex items-center justify-center rounded-md hover:bg-gray-100 text-gray-700">โฏ</button>
                        <div x-show="open" x-transition class="absolute top-full mt-2 right-0 bg-white border border-gray-200 rounded-lg shadow-lg py-2 z-50 min-w-[12rem]">
                            <div class="max-h-64 overflow-y-auto" x-ref="moreList">
                                {% if header.data.header_menu and (header.data.header_menu | length) > 0 %}
                                    {% for item in header.data.header_menu %}
                                    <a data-index="{{ loop.index0 }}" href="{{ item.url | default('#') }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 whitespace-nowrap">{{ item.title | default('ุตูุญุฉ') }}</a>
                                    {% endfor %}
                                {% else %}
                                    <a data-index="0" href="/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 whitespace-nowrap">ุงูุฑุฆูุณูุฉ</a>
                                    <a data-index="1" href="/collections" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 whitespace-nowrap">ุงูุชุตูููุงุช</a>
                                    <a data-index="2" href="/products-collection" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 whitespace-nowrap">ุงูููุชุฌุงุช</a>
                                    <a data-index="3" href="/latest" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 whitespace-nowrap">ุงูุฃุญุฏุซ</a>
                                    <a data-index="4" href="/blog" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 whitespace-nowrap">ุงููุฏููุฉ</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Right column: desktop logo, mobile icons -->
            <div class="flex items-center gap-x-4 justify-end">
                <!-- Desktop: utility icons on the right -->
                <div class="hidden lg:flex items-center gap-x-4">
                    <button @click="toggleModal('search')" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 cursor-pointer" aria-label="ุจุญุซ">
                        <svg class="h-6 w-6 text-gray-700"
                            viewBox="0 0 22 22" stroke="currentColor" stroke-width="1.9" fill="none">
                            <circle cx="11" cy="10" r="7"></circle>
                            <path d="m16 15 3 3" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                    {% if globals.customer._id %}
                    <button class="logout p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200" aria-label="ุงูุญุณุงุจ">
                        <img src="{{ globals.customer.account.avatarUrl }}" class="object-contain w-6 h-6 rounded-full border-2 border-gray-200"
                            alt="">
                    </button>
                    {% else %}
                    <button class="login p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200" aria-label="ุงูุญุณุงุจ">
                        <svg class="h-6 w-6 text-gray-700" viewBox="0 0 22 22" stroke="currentColor" stroke-width="1.9" fill="none">
                            <circle cx="11" cy="7" r="4"></circle>
                            <path d="M3.5 19c1.421-2.974 4.247-5 7.5-5s6.079 2.026 7.5 5" stroke-linecap="round"></path>
                        </svg>
                    </button>
                    {% endif %}
                    <button @click="toggleModal('cart')" class="relative p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200" aria-label="ุนุฑุจุฉ ุงูุชุณูู"
                        @click.prevent="cartOpen = true">
                        <svg class="h-6 w-6 text-gray-700" viewBox="0 0 22 22" stroke="currentColor"
                            stroke-width="1.9">
                            <path
                                d="M9.182 18.454a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.818 0Zm7.272 0a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.819 0Z"
                                fill="currentColor"></path>
                            <path
                                d="M5.336 6.636H21l-3.636 8.182H6.909L4.636 3H1m8.182 15.454a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.818 0Zm7.272 0a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.819 0Z"
                                fill="none" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <span x-text="globals?.cart?.items?.length || 0"
                            class="absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center border-2 border-white shadow-lg font-['Cairo',sans-serif]"></span>
                    </button>
                </div>
                <!-- Mobile: right-side icons -->
                <div class="flex lg:hidden items-center gap-x-4">
                    <button @click="toggleModal('search')" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 cursor-pointer" aria-label="ุจุญุซ">
                        <svg class="h-6 w-6 text-gray-700"
                            viewBox="0 0 22 22" stroke="currentColor" stroke-width="1.9" fill="none">
                            <circle cx="11" cy="10" r="7"></circle>
                            <path d="m16 15 3 3" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                    {% if globals.customer._id %}
                    <button class="logout p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200" aria-label="ุงูุญุณุงุจ">
                        <img src="{{ globals.customer.account.avatarUrl }}" class="object-contain w-6 h-6 rounded-full border-2 border-gray-200" alt="">
                    </button>
                    {% else %}
                    <button class="login p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200" aria-label="ุงูุญุณุงุจ">
                        <svg class="h-6 w-6 text-gray-700" viewBox="0 0 22 22" stroke="currentColor" stroke-width="1.9" fill="none">
                            <circle cx="11" cy="7" r="4"></circle>
                            <path d="M3.5 19c1.421-2.974 4.247-5 7.5-5s6.079 2.026 7.5 5" stroke-linecap="round"></path>
                        </svg>
                    </button>
                    {% endif %}
                    <button @click="toggleModal('cart')" class="relative p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200" aria-label="ุนุฑุจุฉ ุงูุชุณูู"
                        @click.prevent="cartOpen = true">
                        <svg class="h-6 w-6 text-gray-700" viewBox="0 0 22 22" stroke="currentColor"
                            stroke-width="1.9">
                            <path
                                d="M9.182 18.454a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.818 0Zm7.272 0a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.819 0Z"
                                fill="currentColor"></path>
                            <path
                                d="M5.336 6.636H21l-3.636 8.182H6.909L4.636 3H1m8.182 15.454a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.818 0Zm7.272 0a.91.91 0 1 1-1.818 0 .91.91 0 0 1 1.819 0Z"
                                fill="none" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <span x-text="globals?.cart?.items?.length || 0"
                            class="absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center border-2 border-white shadow-lg font-['Cairo',sans-serif]"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- ############### END: PROFESSIONAL CART SIDE-PANEL ############### -->
{%ui "sidebar.njk", menu=header.data.header_menu %}
{%ui "search.njk" %}
{%ui "cart.njk" %}